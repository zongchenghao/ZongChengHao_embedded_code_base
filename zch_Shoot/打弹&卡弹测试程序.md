# *打弹&卡弹测试程序*

## *（一）程序说明*

#### *1.本程序可以做以下测试：*

> a.测试机械组新做的发射机构是否会卡弹；
>
> b.测试打弹功能是否正常；
>
> c.测试效果：用遥控器控制的射击任务

#### *2.硬件&接线说明*

> a.设备需求：M3508电机x2、can1总线x3、M2006电机、C610电调、robomaster开发板C型、中心板、电源线、DR16接收机、DT7遥控器
>
> b.接线要求：中心板的一个can1口与robomaster开发板C型的can1口相接
>
> ​                       两个M3508电机上的can1口与robomaster开发板C型的can1口或中心板的can1口相接
>
> ​                       M2006电机上的can1口与robomaster开发板C型的can1口或中心板的can1口相接
>
> ​                       DR16接收机与robomaster开发板C型的DBUS口连接
>
> c.硬件要求：左侧的M3508电机设置为ID1，右侧的M3508电机设置为ID2时
>
> ​                      M2006电机设置为ID3
>
> ​                      要求DR16接收机与DT7遥控器对频成功
>
> ​                      推荐大家都安装上[遥控器的驱动程序](https://www.robomaster.com/zh-CN/products/components/detail/122))，用于键鼠测试（本代码不包含）

#### *3.测试说明*

> a,如果要调整射速，只需要调整以下代码块:
>
> ```c
> static void Shoot_FrictionWheelMotorCtrl(ShootCtrlMode_e mode, FrictionWheelMotor_t motor[2])
> {
> 	if (mode == SHOOT_START)
>   	{
> 		motor[0].set_speed = 3000;
>     	motor[1].set_speed = -3000;
> 	}
> 	else
> 	{
> 		motor[0].set_speed = 0;
> 		motor[1].set_speed = 0;
> 	}
> 
> 	for (uint8_t i = 0; i < 2; i++)
> 	{
>     motor[i].current_set = pid_calc(&motor[i].pid, motor[i].motor_info->speed_rpm, 		motor[i].set_speed);
>   	}
> }
> ```
> b.调整`motor[0].set_speed = 3000;``motor[1].set_speed = -3000;`这两行中两个电机转速的赋值，如果需要加快射速就调高赋值，反之亦然
>
> c.遥控操作：左上拨轮向上滚动，摩擦轮开启，进入射击模式
>
> ​                      在射击模式下，向下滚动左上拨轮，拨弹盘转过一定的角度，拨出一颗子弹
>
> ​                      在射击模式下，保持左上拨轮向下1.5s，便会开启速射模式，子弹将持续射出
