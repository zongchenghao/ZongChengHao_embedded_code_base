# *遥控器测试程序*

## *（一）程序说明*

#### *1.本程序可以做以下测试：*

> a.测试遥控器&接收机是否正常工作；
>
> b.测试DBUS的数据收发是否准确，是否需要进一步调教([*调参软件*](https://www.robomaster.com/zh-CN/products/components/detail/122))；

#### *2.硬件&接线说明*

> a.设备需求：M3508电机、can1总线、robomaster开发板C型、电源线、DR16接收机、DT7遥控器
>
> b.接线要求：M3508电机上的can1口与robomaster开发板C型的can1口相接
>
> ​                       DR16接收机与robomaster开发板C型的DBUS口连接
>
> c.硬件要求：M3508电机设置为ID1时，电机由遥控器左遥杆上下通道控制
>
> ​                      M3508电机设置为ID2时，电机由遥控器右遥杆上下通道控制
>
> ​                      M3508电机设置为ID3时，电机由遥控器右遥杆左右通道控制
>
> ​                      M3508电机设置为ID4时，电机由遥控器左遥杆左右通道控制
>
> ​                      要求DR16接收机与DT7遥控器对频成功
>
> ​                      推荐大家都安装上[遥控器的驱动程序](https://www.robomaster.com/zh-CN/products/components/detail/122))，用于键鼠测试（本代码不包含）

#### *3.测试说明*

> a,如果需要调整电机的速度，只需要调整以下代码块:
>
> `extern motor_info_t chassis_motor[4];`
> `extern rc_info_t rc;`
>
> `void Text_Task(void const *pvParameters)
> {
> 	for(;;)
> 	{
> 		CAN_M3508_Send(&hcan1,rc.ch3*5, rc.ch1*5, rc.ch0*5, rc.ch2*5);
> 		/*电机ID1左拨杆上下；ID2右拨杆上下；ID3右拨杆左右；ID4左拨杆左右*/
> 		osDelay(10);
> 	}
> }`
>
> b.调整`CAN_M3508_Send(&hcan1,rc.ch3*5, rc.ch1*5, rc.ch0*5, rc.ch2*5)`这一行中的每一个通道值所乘的系数（如：rc.ch3*5），如果需要加快电机转速就调高系数，反之亦然
>
> c.其他通道如需测试，请自行用仿真器DBUG进行查看，只需要将代码行`extern rc_info_t rc;`中的rc加入观测窗口
>
> d.遥控映射表：
>
> | 程序通道值 | 对应实物的映射 |                变化范围                |
> | :--------: | :------------: | :------------------------------------: |
> |    CH0     | 右摇杆左右通道 |                -660~660                |
> |    CH1     | 右摇杆上下通道 |                -660~660                |
> |    CH2     | 左遥杆左右通道 |                -660~660                |
> |    CH3     | 左遥杆上下通道 |                -660~660                |
> |    CH4     |    左上拨轮    |                -660~660                |
> |    SW1     |    左上拨杆    |        1（上）/3（中）/2（下）         |
> |    SW2     |    右上拨杆    |        1（上）/3（中）/2（下）         |
> |   mouse    |      鼠标      |                   无                   |
> |  keyboard  |      键盘      | Q/W/E/R/A/S/D/F/G/Z/X/C/V/B/SHIFT/CTRL |
>
> 
